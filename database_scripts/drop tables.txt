-- STEP 1: Drop existing tables if they already exist to avoid ORA-00955
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE workout_sessions CASCADE CONSTRAINTS';
    EXECUTE IMMEDIATE 'DROP TABLE payments CASCADE CONSTRAINTS';
    EXECUTE IMMEDIATE 'DROP TABLE equipment CASCADE CONSTRAINTS';
    EXECUTE IMMEDIATE 'DROP TABLE trainers CASCADE CONSTRAINTS';
    EXECUTE IMMEDIATE 'DROP TABLE members CASCADE CONSTRAINTS';
    EXECUTE IMMEDIATE 'DROP TABLE audit_log CASCADE CONSTRAINTS';
EXCEPTION
    WHEN OTHERS THEN
        NULL; -- Ignore errors if tables don't exist
END;
/


-- Make sure you're connected to the PDB (XEPDB1) as SYSTEM
-- To switch: ALTER SESSION SET CONTAINER = XEPDB1;

-- Create user
CREATE USER C##gymadmin IDENTIFIED BY gympassword
DEFAULT TABLESPACE users
TEMPORARY TABLESPACE temp
QUOTA UNLIMITED ON users;

-- Grant privileges
GRANT CREATE SESSION, CREATE TABLE, CREATE PROCEDURE, CREATE SEQUENCE, CREATE VIEW TO gymadmin;
GRANT UNLIMITED TABLESPACE TO gymadmin;
-- Switch to gymadmin user
-- CONNECT gymadmin/gympassword@XEPDB1;







INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Priya Sharma', 'Yoga & Meditation', '9876543210', 'priya.sharma@cultfit.com', TO_DATE('2022-01-15', 'YYYY-MM-DD'));
INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Rahul Kapoor', 'Strength Training', '8765432109', 'rahul.kapoor@cultfit.com', TO_DATE('2021-11-05', 'YYYY-MM-DD'));
INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Neha Patel', 'HIIT & Cardio', '7654321098', 'neha.patel@cultfit.com', TO_DATE('2023-03-20', 'YYYY-MM-DD'));
INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Arjun Singh', 'CrossFit', '6543210987', 'arjun.singh@cultfit.com', TO_DATE('2022-07-10', 'YYYY-MM-DD'));
INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Ananya Reddy', 'Zumba & Dance', '5432109876', 'ananya.reddy@cultfit.com', TO_DATE('2023-01-30', 'YYYY-MM-DD'));
INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Vikram Malhotra', 'MMA & Boxing', '4321098765', 'vikram.malhotra@cultfit.com', TO_DATE('2022-09-18', 'YYYY-MM-DD'));
INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Meera Iyer', 'Pilates & Core', '3210987654', 'meera.iyer@cultfit.com', TO_DATE('2023-05-22', 'YYYY-MM-DD'));
INSERT INTO trainers (full_name, specialization, phone, email, hire_date)
VALUES ('Rajiv Mehra', 'Senior Fitness', '2109876543', 'rajiv.mehra@cultfit.com', TO_DATE('2021-08-14', 'YYYY-MM-DD'));

COMMIT;

select *from trainers;
desc trainers;
select *from members;